<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smart.cmsystem.mapper.ActivitiesMapper">
  <resultMap id="BaseResultMap" type="com.smart.cmsystem.domain.entity.Activities">
    <!--@mbg.generated-->
    <!--@Table activities-->
    <id column="act_id" jdbcType="INTEGER" property="actId" />
    <result column="theme" jdbcType="VARCHAR" property="theme" />
    <result column="community" jdbcType="VARCHAR" property="community" />
    <result column="location" jdbcType="VARCHAR" property="location" />
    <result column="organizers" jdbcType="VARCHAR" property="organizers" />
    <result column="start_time" jdbcType="TIMESTAMP" property="startTime" />
    <result column="end_time" jdbcType="TIMESTAMP" property="endTime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="is_del" jdbcType="INTEGER" property="isDel" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    act_id, theme, community, `location`, organizers, start_time, end_time, create_time, 
    `status`
  </sql>
  <select id="selectAll" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List"></include>
    FROM activities
    <trim prefix="where" prefixOverrides="and">
      <if test="keyword != null and keyword != ''">
        community like concat('%',#{keyword},'%')
        or theme like concat('%',#{keyword},'%')
        or location like concat('%',#{keyword},'%')
        or organizers like concat('%',#{keyword},'%')
      </if>
      <if test="start_time != null and start_time != ''">
        and start_time>#{start_time}
      </if>
      <if test="end_time != null and end_time != ''">
        and end_time
        between CONCAT(#{start_time},' 00:00:00')
        and CONCAT(#{end_time},' 23:59:59')
      </if>
    </trim>
    LIMIT #{limit},#{offset};
  </select>

</mapper>